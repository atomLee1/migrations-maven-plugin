<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Sep 30, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="The MyBatis Team" />
    <meta name="Date-Revision-yyyymmdd" content="20130930" />
    <meta http-equiv="Content-Language" content="en" />
    <title>MyBatis - 
    Usage</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>MyBatis Migrations Maven plugin</h2>
                </div>
                      </div>
        <div class="pull-right">                                <a href="../" id="bannerRight" title="MyBatis logo">
                                                                                        <img src="http://mybatis.github.com/images/mybatis-logo.png"  alt="MyBatis logo"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 30 September 2013</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.1.0</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Reference Documentation</li>
                                
      <li>
    
                          <a href="index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li>
    
                          <a href="plugin-info.html" title="Goals">
          <i class="none"></i>
        Goals</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Usage</a>
          </li>
                  
      <li>
    
                          <a href="examples.html" title="Examples">
          <i class="none"></i>
        Examples</a>
            </li>
                  
      <li>
    
                          <a href="faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                          
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                          
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!-- Copyright 2010-2011 The myBatis Team

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. --><!-- version: $Id$ -->

  
  <div class="section"><h2>Introduction<a name="Introduction"></a></h2>
    <p>In this chapter some examples will show how to use the Migration Plugin goals:</p>

    <div class="section"><h3>Generic Plugin configuration information<a name="Generic_Plugin_configuration_information"></a></h3>
        <p>
            Before starting, please take a look at the following links to know more how to include and configure Maven
            plugins in the POM project:</p>
            <ul>
                <li><a class="externalLink" href="http://maven.apache.org/guides/mini/guide-configuring-plugins.html">Configuring Plugins</a></li>
                <li><a class="externalLink" href="http://maven.apache.org/guides/plugin/guide-java-plugin-development.html">Plugin Development</a></li>
                <li><a class="externalLink" href="http://maven.apache.org/guides/introduction/introduction-to-plugin-prefix-mapping.html">Plugin Prefix</a></li>
            </ul>
    </div>

    <div class="section"><h3>pom.xml Plugin configuration<a name="pom.xml_Plugin_configuration"></a></h3>
        <p>
            To use Migration Maven plugin in your project you have to configure your <tt>pom.xml</tt>
            file like this:
            </p><div class="source"><pre class="prettyprint">&lt;plugins&gt;
  &lt;plugin&gt;
      &lt;groupId&gt;org.mybatis.maven&lt;/groupId&gt;
      &lt;artifactId&gt;migrations-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;X.X&lt;/version&gt;
      &lt;configuration&gt;
          &lt;repository&gt; [migration repository path] &lt;/repository&gt;
      &lt;/configuration&gt;
      &lt;dependencies&gt;
          [ add your jdbc driver depencency ]
      &lt;/dependencies&gt;
  &lt;/plugin&gt;
&lt;plugins&gt;</pre></div>
        
    </div>

    <div class="section"><h3>The migration:status goal<a name="The_migration:status_goal"></a></h3>
        <p>
            This goal prints the current migration status of database. A tipical output could be:</p>
            <div><pre>mvn migrate:status -Dmigration.path=/path/to/migration/repository

  ...

[INFO] Executing  Apache Migration StatusCommand
[INFO] ID             Applied At          Description
[INFO] ================================================================================
[INFO] 20100400000001    ...pending...    create changelog
[INFO] 20100400000002    ...pending...    first migration
[INFO] 20100400000003    ...pending...    second migration
[INFO]
...</pre></div>
    </div>

    <div class="section"><h3>The migration:check goal<a name="The_migration:check_goal"></a></h3>
        <p>
            checks the current status of your database migration and fails if one or more script are pending.
            A typical use of this goal is check the migration status into your maven build life cycle:</p>

            <div class="source"><pre class="prettyprint">&lt;plugin&gt;
  &lt;groupId&gt;org.mybatis.maven&lt;/groupId&gt;
  &lt;artifactId&gt;migrations-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;X.X&lt;/version&gt;
  &lt;configuration&gt;
      &lt;repository&gt; [migration repository path] &lt;/repository&gt;
  &lt;/configuration&gt;
  &lt;executions&gt;
  &lt;execution&gt;
      &lt;id&gt;migration-chack&lt;/id&gt;
      &lt;phase&gt;test&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;check&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
  &lt;dependencies&gt;
      &lt;dependency&gt; [your jdbc dependency] &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/plugin&gt;</pre></div>

            <p>and then</p>

            <div><pre>mvn clean test</pre></div>

            <p>this goal fails if migration plugin founds one or more pending script. To <i>skip</i>  the
            migration check set the properties <tt>migration.skip</tt> like this:</p>

            <div><pre>mvn -Dmigration.skip=true clean test</pre></div>
    </div>

    <div class="section"><h3>Site report for Maven 2 projects<a name="Site_report_for_Maven_2_projects"></a></h3>
        <p>
            You can configure your <tt>pom.xml</tt> to create a simple report of your database status:
        </p>
            <div class="source"><pre class="prettyprint">&lt;build&gt;
  ...
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.mybatis.maven&lt;/groupId&gt;
      &lt;artifactId&gt;migrations-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;X.X&lt;/version&gt;
      &lt;configuration&gt;
        &lt;repository&gt; [migration repository path] &lt;/repository&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;migration-chack&lt;/id&gt;
          &lt;phase&gt;test&lt;/phase&gt;
          &lt;goals&gt;
            &lt;goal&gt;check&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
      &lt;dependencies&gt;
        &lt;dependency&gt; [your jdbc dependency] &lt;/dependency&gt;
      &lt;/dependencies&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;

&lt;reporting&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.mybatis.maven&lt;/groupId&gt;
      &lt;artifactId&gt;migrations-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;X.X&lt;/version&gt;
      &lt;configuration&gt;
        &lt;repository&gt; [migration repository path] &lt;/repository&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/reporting&gt;</pre></div>

            <p>once the plugin is configured, users can invoke:</p>

            <div><pre>mvn site</pre></div>
    </div>


     <div class="section"><h3>Site report for Maven 3 projects<a name="Site_report_for_Maven_3_projects"></a></h3>
        <p>
            You can configure your <tt>pom.xml</tt> to create a simple report of your database status:</p>

            <div class="source"><pre class="prettyprint">&lt;build&gt;
  ...
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.mybatis.maven&lt;/groupId&gt;
      &lt;artifactId&gt;migrations-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;X.X&lt;/version&gt;
      &lt;configuration&gt;
        &lt;repository&gt; [migration repository path] &lt;/repository&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;migration-chack&lt;/id&gt;
          &lt;phase&gt;test&lt;/phase&gt;
          &lt;goals&gt;
            &lt;goal&gt;check&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
      &lt;dependencies&gt;
        &lt;dependency&gt; [your jdbc dependency] &lt;/dependency&gt;
      &lt;/dependencies&gt;
    &lt;/plugin&gt;
    &lt;plugin&gt;
       &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
       &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;
       &lt;version&gt;3.0&lt;/version&gt;
       &lt;configuration&gt;
         &lt;reportPlugins&gt;
           &lt;plugin&gt;
             &lt;groupId&gt;org.mybatis.maven&lt;/groupId&gt;
             &lt;artifactId&gt;migrations-maven-plugin&lt;/artifactId&gt;
             &lt;version&gt;X.X&lt;/version&gt;
             &lt;configuration&gt;
               &lt;repository&gt; [migration repository path] &lt;/repository&gt;
             &lt;/configuration&gt;
           &lt;/plugin&gt;
         &lt;/reportPlugins&gt;
       &lt;/configuration&gt;
     &lt;/plugin&gt;
  &lt;/plugins&gt;
  ...
</pre></div>

            <p>once the plugin is configured, users can invoke:</p>

            <div><pre>mvn site</pre></div>
    </div>
  </div>




                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2010-2013
                        <a href="http://www.mybatis.org/">MyBatis.org</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
